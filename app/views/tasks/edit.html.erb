<div class="flex flex-col items-center my-10">
  <div class="card bg-base-100 shadow-xl max-w-2xl">
    <div class="card-body">      
      <%= form_with model: @task, local: true, html: { class: "flex flex-col gap-6" } do |f| %>
        <!-- „Çø„Ç§„Éà„É´ÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ -->
        <div class="form-control">
          <%= f.label :title, class: "label" %>
          <div class="join w-full">
            <%= f.text_field :title, class: "input input-bordered join-item flex-1" %>
            <!-- ‚ôªÔ∏èonclick„Ç§„Éô„É≥„Éà„ÅØÊîπÂñÑ„ÅÆ‰ΩôÂú∞„ÅÇ„Çä„ÄÇ‰ªäÂæåStimulus„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„ÅßÂÆüË£Ö‰∫àÂÆö -->
            <button type="button" 
                    class="btn btn-square join-item"
                    onclick="document.getElementById('task_title').value = ''">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
              </svg>
            </button>
          </div>
        </div>

        <!-- „Çø„Ç∞ÈÅ∏Êäû„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="form-control">
          <%= f.label :tag_ids, class: "label" %>
          <!-- „Çø„Ç∞ÈÅ∏Êäû„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥ -->
          <div class="dropdown">
            <!-- ‚ôªÔ∏èsafari„Éñ„É©„Ç¶„Ç∂Âê´„ÇÄ„Åô„Åπ„Å¶„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅßÂãï‰Ωú„Åô„Çã„Ç≥„Éº„Éâ„ÄÇhttps://v4.daisyui.com/components/dropdown/#method-2-using-css-focus
            <div tabindex="0" role="button" class="btn btn-outline">
              <span>ÈÅ∏Êäû</span>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
              </svg>
            </div>
            -->
            <!-- ‚ö†Ô∏èbutton„Çø„Ç∞„Çí‰ΩøÁî®„Åó„ÅüÂ†¥Âêà„ÄÅsafari„Éñ„É©„Ç¶„Ç∂„Åß„ÅØÂãï‰Ωú„Åó„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„ÄÇhttps://v4.daisyui.com/components/dropdown/#method-2-using-css-focus-->
            <button type="button" class="btn btn-outline">
              <span>ÈÅ∏Êäû</span>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
              </svg>
            </button>

            <!-- üéìtabindex="0"„Å´„Çà„Çä„ÄÅ„É©„Éô„É´„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„ÇÇÁîªÈù¢„ÅåÈñâ„Åò„Å™„Åè„Å™„Çã„ÄÇ-->
            <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] p-2 shadow w-full max-h-60 overflow-y-auto">
              <% Tag.all.each do |tag| %>
                <li>
                  <label class="flex items-center gap-2">
                    <input type="checkbox" 
                            name="task[tag_ids][]" 
                            value="<%= tag.id %>"
                            <%= 'checked' if @task.tag_ids.include?(tag.id) %>
                            class="checkbox checkbox-primary">
                    <span><%= tag.name %></span>
                  </label>
                </li>
              <% end %>
            </ul>
          </div>
        </div>

        <!-- ‚ôªÔ∏è„Çø„Ç∞Ê§úÁ¥¢„Çª„ÇØ„Ç∑„Éß„É≥ Â∞ÜÊù•ÁöÑ„Å´‰ª•‰∏ã„ÅÆÂÆüË£Ö„ÅßË°å„ÅÑ„Åü„ÅÑ„Åå„ÄÅjs„Åå„Åæ„Å†ÁêÜËß£‰∏çË∂≥„Å™„ÅÆ„ÅßÁΩÆ„ÅÑ„Å¶„Åä„Åè-->
        <%#= render partial: "tag_search_form", locals: { f: f, task: @task } %>

        <!-- „Åì„Åì„Åæ„ÅßË™≠„Åø„Åæ„Åó„Åü(2025/07/17) -->
        <!-- „ÇÑ„Çã„Åì„Å®„É™„Çπ„Éà„Çª„ÇØ„Ç∑„Éß„É≥Ôºà„Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÔºâ -->
        <div class="form-control">
          <div class="flex items-center justify-between mb-3">
            <!-- ‚ôªÔ∏è„Åì„Åì„ÅØf.label„Å´Â§âÊõ¥‰∫àÂÆö -->
            <h3 class="text-lg font-medium">„ÇÑ„Çã„Åì„Å®</h3>
            <button type="button" class="btn btn-ghost btn-sm">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
              </svg>
              <span>ËøΩÂä†</span>
            </button>
          </div>
          <!-- ‚ôªÔ∏è„Åì„Åì„ÅØtodo„É¢„Éá„É´‰ΩúÊàêÂæå„Å´„ÄÅf.text_field„Å´Â§âÊõ¥‰∫àÂÆö -->
          <div class="space-y-2">
            <input type="text" placeholder="„ÇÑ„Çã„Åì„Å®1" class="input input-bordered w-full" disabled>
            <input type="text" placeholder="„ÇÑ„Çã„Åì„Å®2" class="input input-bordered w-full" disabled>
            <input type="text" placeholder="„ÇÑ„Çã„Åì„Å®3" class="input input-bordered w-full" disabled>
          </div>
        </div>

        <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
        <div class="flex justify-end gap-4 pt-4">
          <%= link_to "Êàª„Çã", task_path(@task), class: "btn btn-ghost" %>
          <%= f.submit "Â§âÊõ¥", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%# <script>
function toggleTagDropdown() {
  const dropdown = document.getElementById('tagDropdown');
  dropdown.classList.toggle('hidden');
}

// „Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥Â§ñ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„ÅüÊôÇ„Å´Èñâ„Åò„Çã
document.addEventListener('click', function(event) {
  const dropdown = document.getElementById('tagDropdown');
  const button = event.target.closest('button');
  
  if (!dropdown.contains(event.target) && !button) {
    dropdown.classList.add('hidden');
  }
});
</script> %>
